<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<button id="btn">模拟获取数据</button>
		<p id="result"></p>
		<script>
			let oBtn = document.getElementById('btn');
			let oResult = document.getElementById('result');
			oBtn.onclick = () => {
				AsyncGetData()
					.then((data) => {
						// 这里是数据获取成功后需要执行的逻辑
						oResult.innerHTML = data;
					})
					.catch((data) => {
						// 这里是数据获取失败后需要执行的逻辑
						oResult.innerHTML = data;
					});
			};
			function AsyncGetData() {
				return new Promise((resolve, reject) => {
					// 把异步代码放到Promise里面执行
					setTimeout(() => {
						let num = Math.random() * 20;
						// 异步代码结果有可能成功,有可能失败
						if (num > 10) {
							// 如果有数据,需要把数据传给resolve
							resolve('这是一些数据'); // 成功
						} else {
							reject('执行失败'); // 失败
						}
					});
				});
			}
		</script>
	</body>
</html>
